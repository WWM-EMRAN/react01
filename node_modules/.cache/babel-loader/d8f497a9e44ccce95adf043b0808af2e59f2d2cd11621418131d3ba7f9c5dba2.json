{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\aliem\\\\Desktop\\\\aliem\\\\react01\\\\src\\\\components\\\\SiteContext.jsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useState, useEffect, useContext } from 'react';\n\n// Create the Context to hold the global state\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SiteContext = /*#__PURE__*/createContext();\nexport const SiteProvider = ({\n  children\n}) => {\n  _s();\n  const [siteData, setSiteData] = useState(null);\n  const [loading, setLoading] = useState(true);\n\n  // List of files to fetch, mirroring your site-loader.js configuration\n  const JSON_FILES = ['site.json', 'personal_info.json', 'key_metrics.json', 'education.json', 'professional_experience.json', 'expertise_achievements.json', 'skills.json', 'honors_awards.json', 'courses_trainings_certificates.json', 'projects.json', 'memberships.json', 'sessions_events.json', 'languages.json', 'portfolios.json', 'volunteerings.json', 'publications.json', 'contacts.json', 'ea_logo.json', 'copyright.json', 'diary.json', 'gallery.json'];\n  const BASE_DATA_PATH = './assets/data/'; // Path defined in your loader\n\n  useEffect(() => {\n    const loadData = async () => {\n      const CACHE_KEY = 'site_data_cache';\n      const TIMESTAMP_KEY = 'site_data_timestamp';\n\n      // 1. Caching Strategy from your site-loader.js\n      const cachedData = localStorage.getItem(CACHE_KEY);\n      const lastFetch = localStorage.getItem(TIMESTAMP_KEY);\n      const now = new Date().getTime();\n      if (cachedData && lastFetch) {\n        try {\n          var _tempSiteData$site, _tempSiteData$site$ca;\n          const tempSiteData = JSON.parse(cachedData);\n          const expirationSeconds = ((_tempSiteData$site = tempSiteData.site) === null || _tempSiteData$site === void 0 ? void 0 : (_tempSiteData$site$ca = _tempSiteData$site.cache_settings) === null || _tempSiteData$site$ca === void 0 ? void 0 : _tempSiteData$site$ca.expiration_seconds) || 86400;\n          const expirationMs = expirationSeconds * 1000;\n          if (now - lastFetch < expirationMs) {\n            console.log(`Loading data from ${expirationSeconds}s cache...`);\n            setSiteData(tempSiteData);\n            setLoading(false);\n            return;\n          }\n        } catch (e) {\n          console.warn(\"Cache parsing failed, performing fresh fetch.\");\n        }\n      }\n\n      // 2. Fresh Fetch Logic\n      console.log('Fetching fresh site data...');\n      try {\n        const fetchPromises = JSON_FILES.map(fileName => fetch(BASE_DATA_PATH + fileName).then(res => {\n          if (!res.ok) throw new Error(`Failed to load ${fileName}`);\n          return res.json();\n        }).then(data => ({\n          name: fileName.replace('.json', ''),\n          data\n        })));\n        const results = await Promise.all(fetchPromises);\n        const combinedData = {};\n        results.forEach(item => {\n          combinedData[item.name] = item.data;\n        });\n\n        // Save to localStorage\n        localStorage.setItem(CACHE_KEY, JSON.stringify(combinedData));\n        localStorage.setItem(TIMESTAMP_KEY, now.toString());\n        setSiteData(combinedData);\n      } catch (error) {\n        console.error('Error during data loading:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n    loadData();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(SiteContext.Provider, {\n    value: {\n      siteData,\n      loading\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 83,\n    columnNumber: 9\n  }, this);\n};\n\n// Custom hook for easy data access in components\n_s(SiteProvider, \"3xOtz6o6wPanPdqhbvJLmM2UPGE=\");\n_c = SiteProvider;\nexport const useSite = () => {\n  _s2();\n  return useContext(SiteContext);\n};\n_s2(useSite, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nvar _c;\n$RefreshReg$(_c, \"SiteProvider\");","map":{"version":3,"names":["React","createContext","useState","useEffect","useContext","jsxDEV","_jsxDEV","SiteContext","SiteProvider","children","_s","siteData","setSiteData","loading","setLoading","JSON_FILES","BASE_DATA_PATH","loadData","CACHE_KEY","TIMESTAMP_KEY","cachedData","localStorage","getItem","lastFetch","now","Date","getTime","_tempSiteData$site","_tempSiteData$site$ca","tempSiteData","JSON","parse","expirationSeconds","site","cache_settings","expiration_seconds","expirationMs","console","log","e","warn","fetchPromises","map","fileName","fetch","then","res","ok","Error","json","data","name","replace","results","Promise","all","combinedData","forEach","item","setItem","stringify","toString","error","Provider","value","_jsxFileName","lineNumber","columnNumber","_c","useSite","_s2","$RefreshReg$"],"sources":["C:/Users/aliem/Desktop/aliem/react01/src/components/SiteContext.jsx"],"sourcesContent":["import React, { createContext, useState, useEffect, useContext } from 'react';\r\n\r\n// Create the Context to hold the global state\r\nconst SiteContext = createContext();\r\n\r\nexport const SiteProvider = ({ children }) => {\r\n    const [siteData, setSiteData] = useState(null);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    // List of files to fetch, mirroring your site-loader.js configuration\r\n    const JSON_FILES = [\r\n        'site.json', 'personal_info.json', 'key_metrics.json', 'education.json',\r\n        'professional_experience.json', 'expertise_achievements.json', 'skills.json',\r\n        'honors_awards.json', 'courses_trainings_certificates.json', 'projects.json',\r\n        'memberships.json', 'sessions_events.json', 'languages.json', 'portfolios.json',\r\n        'volunteerings.json', 'publications.json', 'contacts.json', 'ea_logo.json',\r\n        'copyright.json', 'diary.json', 'gallery.json'\r\n    ];\r\n\r\n    const BASE_DATA_PATH = './assets/data/'; // Path defined in your loader\r\n\r\n    useEffect(() => {\r\n        const loadData = async () => {\r\n            const CACHE_KEY = 'site_data_cache';\r\n            const TIMESTAMP_KEY = 'site_data_timestamp';\r\n\r\n            // 1. Caching Strategy from your site-loader.js\r\n            const cachedData = localStorage.getItem(CACHE_KEY);\r\n            const lastFetch = localStorage.getItem(TIMESTAMP_KEY);\r\n            const now = new Date().getTime();\r\n\r\n            if (cachedData && lastFetch) {\r\n                try {\r\n                    const tempSiteData = JSON.parse(cachedData);\r\n                    const expirationSeconds = tempSiteData.site?.cache_settings?.expiration_seconds || 86400;\r\n                    const expirationMs = expirationSeconds * 1000;\r\n\r\n                    if (now - lastFetch < expirationMs) {\r\n                        console.log(`Loading data from ${expirationSeconds}s cache...`);\r\n                        setSiteData(tempSiteData);\r\n                        setLoading(false);\r\n                        return;\r\n                    }\r\n                } catch (e) {\r\n                    console.warn(\"Cache parsing failed, performing fresh fetch.\");\r\n                }\r\n            }\r\n\r\n            // 2. Fresh Fetch Logic\r\n            console.log('Fetching fresh site data...');\r\n            try {\r\n                const fetchPromises = JSON_FILES.map(fileName =>\r\n                    fetch(BASE_DATA_PATH + fileName)\r\n                        .then(res => {\r\n                            if (!res.ok) throw new Error(`Failed to load ${fileName}`);\r\n                            return res.json();\r\n                        })\r\n                        .then(data => ({ name: fileName.replace('.json', ''), data }))\r\n                );\r\n\r\n                const results = await Promise.all(fetchPromises);\r\n                const combinedData = {};\r\n                results.forEach(item => {\r\n                    combinedData[item.name] = item.data;\r\n                });\r\n\r\n                // Save to localStorage\r\n                localStorage.setItem(CACHE_KEY, JSON.stringify(combinedData));\r\n                localStorage.setItem(TIMESTAMP_KEY, now.toString());\r\n\r\n                setSiteData(combinedData);\r\n            } catch (error) {\r\n                console.error('Error during data loading:', error);\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n\r\n        loadData();\r\n    }, []);\r\n\r\n    return (\r\n        <SiteContext.Provider value={{ siteData, loading }}>\r\n            {children}\r\n        </SiteContext.Provider>\r\n    );\r\n};\r\n\r\n// Custom hook for easy data access in components\r\nexport const useSite = () => useContext(SiteContext);\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}